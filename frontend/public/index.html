<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Passkeys Demo: Index</title>
        <link href="/style.css" rel="stylesheet" />
    </head>
    <body>
        <p>Welcome, please select the relevant option:</p>
        <ul>
            <li><a href="/signUp.html">Sign Up</a></li>
            <li><a href="/signIn.html">Sign In</a></li>
            <li><a href="/profile.html">My Profile</a></li>
            <li><a href="#" id="deleteAccountLink">Delete My Account</a></li>
            <li><a href="/api/logout">Logout</a></li>
        </ul>
    </body>
    <script type="module">
        document.getElementById('deleteAccountLink').addEventListener('click', async (evt) => {
            const response = await fetch('/api/user', {
                method: 'DELETE'
            });
            if (response.ok) {
                console.log('Account deletion successful!');
                window.location = '/';
            } else {
                console.error('Account deletion failed!');
            }

            evt.preventDefault();
        });
    </script>
</html>
