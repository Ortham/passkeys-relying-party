<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Passkeys Demo: Index</title>
        <link href="/style.css" rel="stylesheet" />
    </head>
    <body>
        <p>Welcome, please select the relevant option:</p>
        <ul>
            <li><a href="/signUp.html">Sign Up</a></li>
            <li><a href="/signIn.html">Sign In</a></li>
            <li><a href="/account.html">My Account</a></li>
            <li><a href="#" id="deleteAccountLink">Delete My Account</a></li>
            <li><a href="#" id="logoutLink">Logout</a></li>
        </ul>
    </body>
    <script type="module">
        async function logout() {
            const response = await fetch('/api/logout');
            if (response.ok) {
                console.log('Logout succeeded');
            } else {
                console.error('Logout failed!');
            }
        }

        document.getElementById('deleteAccountLink').addEventListener('click', async (evt) => {
            const response = await fetch('/api/user', {
                method: 'DELETE'
            });
            if (response.ok) {
                console.log('Account deletion successful!');
                window.location = '/';
            } else {
                console.error('Account deletion failed!');
            }

            evt.preventDefault();
        });

        document.getElementById('logoutLink').addEventListener('click', logout);
    </script>
</html>
